База данных для сети кондитерских "Старый нытик". По ТЗ сеть кондитерских расположена в Москве, продукция готовится в каждой кондитерской на кухнях, доступна доставка и самовывоз. 

Персонал кондитерской состоит из Шеф-Кондитера, Кондитеров, Кассиров, Курьеров и владельца кондитерской. Весь персонал имеет месячную заработную плату на основе выработки по часам и
утвержденный график работы в соответствии с часами работы кондитерской. В кондитерских есть свои рецепты, по которым готовится продукция. Ингредиенты для изделий различаются по калорийности 
и стоимости, и не всегда могут находиться на складе магазина. В рецептах указан список используемых ингредиентов и кухонных инструментов. Список ингредиентов для рецепта может указывать 
ингредиент как в штуках (например, малина для украшения блюда), так и в массе (например, малина для начинки). Ингредиенты используются как топпинги для продукции кондитерской. Благодаря 
мастерству и дальновидности Шеф-Кондитера рецепты содержат основной список ингредиентов, а также ингредиентов заменителей, которые можно использовать при отсутствии основных в этом блюде, 
при этом один ингредиент может заменяться на несколько других ингредиентов заменителей, которые создают аналогичный вкус. Для разных блюд ингредиенты аналоги дают различный вкус из-за 
сочетания вкусов с другими ингредиентами изделия. Именно по этой причине есть ингредиенты аналоги, которые возможно заменять только группой, а при изменении только одного ингредиента
кардинально меняется вкус и показатель вкуса падает. Каждый ингредиент в каждом блюде вносит свой вклад в оттенок вкуса, для простоты эти значения внесены в процентном соотношении к 
общему вкусу. И составляет список топпингов, которые отрицательно влияют на вкус изделия, и вносит процент уменьшения качества вкуса.

Клиент может сделать заказ в конкретной кондитерской по набору действующих прайс-листов этой кондитерской. Один продукт может входить сразу в несколько пайс-листов и по этой причине содержать 
разные ингредиенты в зависимости от прайс-листа. К примеру, есть обычный прайс-лист с пирожным эклер, а также есть вегетарианский прайс-лист, где есть пирожное эклер, который не содержит 
животных жиров, в котором другой список ингредиентов, из списка заменителей. Покупатель на кассе может купить уже готовый витринный товар и топпинг к нему, а может сделать заказ на приготовление.
Если топпинг отрицательно влияет на вкус данного блюда, то процент вкуса не должен упасть ниже 50%.

В Прайс-Листе помимо цены указывается общее время приготовления, калорийность и список ингредиентов, используемых для приготовления. Если покупатель по каким-либо причинам просит исключить 
ингредиент, то это вносится в специальный список, однако если вычеркнутые ингредиенты опускают общий уровень вкуса ниже 50%, то кондитерская, следя за своей репутацией, отказывается в продаже 
таких изделий.

К разработанной базе данных был написан следущий триггер:
 
После оформления заказа, пересчитываются остатки по складу. В заказ не могут попасть изделия с процентом вкуса меньше 50%, однако транзакция не отменяется полностью, остальные изделия 
и топпинги вставляются корректно.

А также написаны запросы:
Для каждого продукта вывести количество ингредиентов, количество прайс-листов в которых он фигурирует, количество активных прайс-листов, количество накладных в которых был данный продукт, 
количество разных покупателей купивших данный продукт, среднюю цену по продажам по кондитерским.

Для каждого прайс-листа вывести количество продуктов входящих в прайс-лист, суммарную выручку по накладным, оформленным по данным прайс-листам, среднюю разницу цен относительно базовой 
стоимости продукции, разницу дней между окончанием действия прайс-листа и последней покупкой.
